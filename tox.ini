[tox]
skipsdist = True

[testenv]
deps =
    -r requirements.test.txt
commands =
    pytest weave/tests/trace/

[testenv:{base,anthropic,cerebras,cohere,dspy,groq,langchain,litellm,llamaindex,mistral,openai}-py{39,310,311,312}]
deps =
    ; TODO: split out test deps
    {[testenv]deps}
    anthropic: anthropic>=0.18.0
    cerebras: cerebras-cloud-sdk
    cohere: cohere>=5.9.1
    ; dspy: 
    groq: groq>=0.9.0
    langchain: langchain-core>=0.2.1
    langchain: langchain-openai>=0.1.7
    langchain: langchain-community>=0.2.1
    litellm: litellm>=1.36.1
    llamaindex: llama-index>=0.10.35
    mistral: mistralai>=0.1.8,<1.0.0
    openai: openai>=1.0.0

commands =
    base: pytest weave/tests/trace/ weave/trace/ weave/trace_server/
    anthropic: pytest weave/integrations/anthropic/
    cerebras: pytest weave/integrations/cerebras/
    cohere: pytest weave/integrations/cohere/
    dspy: pytest weave/integrations/dspy/
    groq: pytest weave/integrations/groq/
    langchain: pytest weave/integrations/langchain/
    litellm: pytest weave/integrations/litellm/
    llamaindex: pytest weave/integrations/llamaindex/
    mistral: pytest weave/integrations/mistral/
    openai: pytest weave/integrations/openai/

[pytest]
; addopts = -v --cov-report term-missing
addopts = -v
